window.jQuery&&function(t){t.fn.rating=function(a){if(0==this.length)return this;if("string"==typeof arguments[0]){if(this.length>1){var i=arguments;return this.each(function(){t.fn.rating.apply(t(this),i)})}return t.fn.rating[arguments[0]].apply(this,t.makeArray(arguments).slice(1)||[]),this}var a=t.extend({},t.fn.rating.options,a||{});return t.fn.rating.calls++,this.not(".star-rating-applied").addClass("star-rating-applied").each(function(){var i,r=t(this),n=(this.name||"unnamed-rating").replace(/\[|\]/g,"_").replace(/^\_+|\_+$/g,""),s=t(this.form||document.body),e=s.data("rating");e&&e.call==t.fn.rating.calls||(e={count:0,call:t.fn.rating.calls});var l=e[n];l&&(i=l.data("rating")),l&&i?i.count++:(i=t.extend({},a||{},(t.metadata?r.metadata():t.meta?r.data():null)||{},{count:0,stars:[],inputs:[]}),i.serial=e.count++,l=t('<span class="star-rating-control"/>'),r.before(l),l.addClass("rating-to-be-drawn"),r.attr("disabled")&&(i.readOnly=!0),l.append(i.cancel=t('<div class="rating-cancel"><a title="'+i.cancel+'">'+i.cancelValue+"</a></div>").mouseover(function(){t(this).rating("drain"),t(this).addClass("star-rating-hover")}).mouseout(function(){t(this).rating("draw"),t(this).removeClass("star-rating-hover")}).click(function(){t(this).rating("select")}).data("rating",i)));var d=t('<div class="star-rating rater-'+i.serial+'"><a title="'+(this.title||this.value)+'">'+this.value+"</a></div>");if(l.append(d),this.id&&d.attr("id",this.id),this.className&&d.addClass(this.className),i.half&&(i.split=2),"number"==typeof i.split&&i.split>0){var u=(t.fn.width?d.width():0)||i.starWidth,c=i.count%i.split,h=Math.floor(u/i.split);d.width(h).find("a").css({"margin-left":"-"+c*h+"px"})}i.readOnly?d.addClass("star-rating-readonly"):d.addClass("star-rating-live").mouseover(function(){t(this).rating("fill"),t(this).rating("focus")}).mouseout(function(){t(this).rating("draw"),t(this).rating("blur")}).click(function(){t(this).rating("select")}),this.checked&&(i.current=d),r.hide(),r.change(function(){t(this).rating("select")}),d.data("rating.input",r.data("rating.star",d)),i.stars[i.stars.length]=d[0],i.inputs[i.inputs.length]=r[0],i.rater=e[n]=l,i.context=s,r.data("rating",i),l.data("rating",i),d.data("rating",i),s.data("rating",e)}),t(".rating-to-be-drawn").rating("draw").removeClass("rating-to-be-drawn"),this},t.extend(t.fn.rating,{calls:0,focus:function(){var a=this.data("rating");if(!a)return this;if(!a.focus)return this;var i=t(this).data("rating.input")||t("INPUT"==this.tagName?this:null);a.focus&&a.focus.apply(i[0],[i.val(),t("a",i.data("rating.star"))[0]])},blur:function(){var a=this.data("rating");if(!a)return this;if(!a.blur)return this;var i=t(this).data("rating.input")||t("INPUT"==this.tagName?this:null);a.blur&&a.blur.apply(i[0],[i.val(),t("a",i.data("rating.star"))[0]])},fill:function(){var t=this.data("rating");return t?void(t.readOnly||(this.rating("drain"),this.prevAll().andSelf().filter(".rater-"+t.serial).addClass("star-rating-hover"))):this},drain:function(){var t=this.data("rating");return t?void(t.readOnly||t.rater.children().filter(".rater-"+t.serial).removeClass("star-rating-on").removeClass("star-rating-hover")):this},draw:function(){var a=this.data("rating");return a?(this.rating("drain"),a.current?(a.current.data("rating.input").prop("checked",!0),a.current.prevAll().andSelf().filter(".rater-"+a.serial).addClass("star-rating-on")):t(a.inputs).prop("checked",!1),a.cancel[a.readOnly||a.required?"hide":"show"](),void this.siblings()[a.readOnly?"addClass":"removeClass"]("star-rating-readonly")):this},select:function(a,i){var r=this.data("rating");if(!r)return this;if(!r.readOnly){if(r.current=null,"undefined"!=typeof a){if("number"==typeof a)return t(r.stars[a]).rating("select",void 0,i);"string"==typeof a&&t.each(r.stars,function(){t(this).data("rating.input").val()==a&&t(this).rating("select",void 0,i)})}else r.current="INPUT"==this[0].tagName?this.data("rating.star"):this.is(".rater-"+r.serial)?this:null;this.data("rating",r),this.rating("draw");var n=t(r.current?r.current.data("rating.input"):null);(i||void 0==i)&&r.callback&&r.callback.apply(n[0],[n.val(),t("a",r.current)[0]])}},readOnly:function(a,i){var r=this.data("rating");return r?(r.readOnly=a||void 0==a?!0:!1,i?t(r.inputs).attr("disabled","disabled"):t(r.inputs).removeAttr("disabled"),this.data("rating",r),void this.rating("draw")):this},disable:function(){this.rating("readOnly",!0,!0)},enable:function(){this.rating("readOnly",!1,!1)}}),t.fn.rating.options={cancel:"Cancel Rating",cancelValue:"",split:0,starWidth:16},t(function(){t("input[type=radio].star").rating()})}(jQuery);